local player = game.Players.LocalPlayer
local CoreGui = game:GetService("CoreGui")

if CoreGui:FindFirstChild('Crystal hub') then
    CoreGui:FindFirstChild('Crystal hub'):Destroy()
end

local Crystal = {
    TweenService = game:GetService("TweenService"),
    Player = game.Players.LocalPlayer,
    Workspace = workspace,
    CoreGui = game:GetService("CoreGui"),
    UserInputService = game:GetService("UserInputService"),
    Mouse = game.Players.LocalPlayer:GetMouse(),
    ViewportSize = workspace.CurrentCamera.ViewportSize,
    Stepped = game:GetService("RunService").Stepped,
    OldMouseIcon = game.Players.LocalPlayer:GetMouse().Icon
}

-- Utility Functions
Crystal.TweenObject = function(config)
    config.Object = config.Object or config[1]
    config.Time = config.Time or config[2]
    config.OldValue = config.OldValue or config[3]
    config.NewValue = config.NewValue or config[4]
    local Info = TweenInfo.new(config.Time, Enum.EasingStyle.Quint)
    local tween = Crystal.TweenService:Create(config.Object, Info, {[config.OldValue] = config.NewValue})
    tween:Play()
    return tween
end

Crystal.Click = function(Object, callback)
    Object.Activated:Connect(function()
        callback()
    end)
end

Crystal.Find = function(Object, Name)
    for _, v in next, Object:GetChildren() do
        if v.Name == Name then
            return v
        end
    end
end

Crystal.Mouseto = function(Object, CallbackEnter, CallbackLeave)
    Object.MouseEnter:Connect(function()
        CallbackEnter()
    end)
    Object.MouseLeave:Connect(function()
        CallbackLeave()
    end)
end

Crystal.MakeDraggable = function(object, top)
    local Dragging = nil
    local DragInput = nil
    local DragStart = nil
    local StartPosition = nil
    local function UpdatePos(input)
        local Delta = input.Position - DragStart
        local newPos = UDim2.new(
            StartPosition.X.Scale,
            StartPosition.X.Offset + Delta.X,
            StartPosition.Y.Scale,
            StartPosition.Y.Offset + Delta.Y
        )
        object.Position = newPos
    end
    top.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartPosition = object.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    Dragging = false
                end
            end)
        end
    end)
    top.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            DragInput = input
        end
    end)
    Crystal.UserInputService.InputChanged:Connect(function(input)
        if input == DragInput and Dragging then
            UpdatePos(input)
        end
    end)
end

Crystal.CustomSize = function(object)
    local Dragging = false
    local DragInput = nil
    local DragStart = nil
    local StartSize = nil
    local maxSizeX = object.Size.X.Offset
    local maxSizeY = object.Size.Y.Offset
    object.Size = UDim2.new(0, maxSizeX, 0, maxSizeY)
    local changesizeobject = Instance.new("Frame")
    changesizeobject.AnchorPoint = Vector2.new(1, 1)
    changesizeobject.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    changesizeobject.BackgroundTransparency = 0.999
    changesizeobject.BorderColor3 = Color3.fromRGB(0, 0, 0)
    changesizeobject.BorderSizePixel = 0
    changesizeobject.Position = UDim2.new(1, 20, 1, 20)
    changesizeobject.Size = UDim2.new(0, 40, 0, 40)
    changesizeobject.Name = "changesizeobject"
    changesizeobject.Parent = object
    Crystal.Mouseto(changesizeobject, function()
        Crystal.Mouse.Icon = "rbxassetid://97880490001888"
    end, function()
        Crystal.Mouse.Icon = Crystal.OldMouseIcon
    end)
    local function UpdateSize(input)
        local Delta = input.Position - DragStart
        local newWidth = StartSize.X.Offset + Delta.X
        local newHeight = StartSize.Y.Offset + Delta.Y
        newWidth = math.max(newWidth, maxSizeX)
        newHeight = math.max(newHeight, maxSizeY)
        object.Size = UDim2.new(0, newWidth, 0, newHeight)
    end
    changesizeobject.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            Dragging = true
            DragStart = input.Position
            StartSize = object.Size
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    Dragging = false
                end
            end)
        end
    end)
    changesizeobject.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            DragInput = input
        end
    end)
    Crystal.UserInputService.InputChanged:Connect(function(input)
        if input == DragInput and Dragging then
            UpdateSize(input)
        end
    end)
end

Crystal.GetMidPos = function(mainFrame)
    return UDim2.new(0, (Crystal.ViewportSize.X/2 - mainFrame.Size.X.Offset/2), 0, (Crystal.ViewportSize.Y/2 - mainFrame.Size.Y.Offset/2))
end

Crystal.Colors = { 
    Primary = Color3.fromRGB(100, 200, 255), 
    Secondary = Color3.fromRGB(180, 100, 255), 
    Background = Color3.fromRGB(10, 10, 20), 
    BackgroundSecondary = Color3.fromRGB(15, 20, 35), 
    BackgroundTertiary = Color3.fromRGB(20, 25, 40), 
    Text = Color3.fromRGB(255, 255, 255), 
    TextSecondary = Color3.fromRGB(180, 180, 180), 
    Border = Color3.fromRGB(80, 60, 120), 
    Accent = Color3.fromRGB(200, 170, 255) 
}

Crystal.Window = function(self, WindowConfig)
    WindowConfig = WindowConfig or {}
    WindowConfig.Title = WindowConfig.Title or "Crystal Hub"
    WindowConfig.Description = WindowConfig.Description or ""
    WindowConfig.User = WindowConfig.User
    WindowConfig.IconUser = WindowConfig.IconUser or ""
    WindowConfig.UseAcrylic = WindowConfig.UseAcrylic or false
    WindowConfig.Size = WindowConfig.Size or UDim2.new(0, 450, 0, 320)
    WindowConfig.DiscordStatus = WindowConfig.DiscordStatus or "love you hipp"
    WindowConfig.DiscordDescription = WindowConfig.DiscordDescription or ""
    WindowConfig.KeyCode = WindowConfig.KeyCode or Enum.KeyCode.RightControl

    local CrystalHub = {}
    CrystalHub.Window = Instance.new("ScreenGui")
    CrystalHub.MainFrame = Instance.new("Frame")
    CrystalHub.DropShadowHolder = Instance.new("Frame")
    CrystalHub.DropShadow = Instance.new("ImageLabel")
    CrystalHub.TopBar = Instance.new("Frame")
    CrystalHub.TopTitle = Instance.new("TextLabel")
    CrystalHub.TopDescription = Instance.new("TextLabel")
    CrystalHub.CloseButton = Instance.new("TextButton")
    CrystalHub.CloseImage = Instance.new("ImageLabel")
    CrystalHub.CloseBorderLeft = Instance.new("Frame")
    CrystalHub.CloseBorderBottom = Instance.new("Frame")
    CrystalHub.MaxButton = Instance.new("TextButton")
    CrystalHub.MaxImage = Instance.new("ImageLabel")
    CrystalHub.HideButton = Instance.new("TextButton")
    CrystalHub.HideImage = Instance.new("ImageLabel")
    CrystalHub.DecideFrame = Instance.new("Frame")
    CrystalHub.DecideCorner = Instance.new("UICorner")
    CrystalHub.TabBar = Instance.new("Frame")
    CrystalHub.TabListLayout = Instance.new("UIListLayout")
    CrystalHub.TabBarCorner = Instance.new("UICorner")
    CrystalHub.TabBarStroke = Instance.new("UIStroke")
    CrystalHub.StatusSection = Instance.new("Frame")
    CrystalHub.StatusCorner = Instance.new("UICorner")
    CrystalHub.StatusStroke = Instance.new("UIStroke")
    CrystalHub.Layers = Instance.new("Frame")
    CrystalHub.LayersFolder = Instance.new("Folder")
    CrystalHub.MainCorner = Instance.new("UICorner")
    CrystalHub.MainStroke = Instance.new("UIStroke")
    CrystalHub.CloseCorner = Instance.new("UICorner")

    CrystalHub.Window.Name = "Crystal hub"
    CrystalHub.Window.Parent = Crystal.CoreGui
    CrystalHub.Window.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

    CrystalHub.MainFrame.Name = "Window11"
    CrystalHub.MainFrame.Parent = CrystalHub.Window
    CrystalHub.MainFrame.BackgroundColor3 = Color3.fromRGB(60, 40, 100)
    CrystalHub.MainFrame.BackgroundTransparency = 0.020
    CrystalHub.MainFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.MainFrame.BorderSizePixel = 0
    CrystalHub.MainFrame.Size = WindowConfig.Size
    CrystalHub.MainFrame.Position = Crystal.GetMidPos(CrystalHub.MainFrame)

    CrystalHub.MainCorner.CornerRadius = UDim.new(0, 12)
    CrystalHub.MainCorner.Parent = CrystalHub.MainFrame

    CrystalHub.MainStroke.Parent = CrystalHub.MainFrame
    CrystalHub.MainStroke.Color = Color3.fromRGB(80, 60, 120)
    CrystalHub.MainStroke.Thickness = 1.800

    CrystalHub.DropShadowHolder.Name = "DropShadowHolder"
    CrystalHub.DropShadowHolder.Parent = CrystalHub.MainFrame
    CrystalHub.DropShadowHolder.BackgroundTransparency = 1.000
    CrystalHub.DropShadowHolder.BorderSizePixel = 0
    CrystalHub.DropShadowHolder.Size = UDim2.new(1, 0, 1, 0)
    CrystalHub.DropShadowHolder.ZIndex = 0

    CrystalHub.DropShadow.Name = "DropShadow"
    CrystalHub.DropShadow.Parent = CrystalHub.DropShadowHolder
    CrystalHub.DropShadow.AnchorPoint = Vector2.new(0.5, 0.5)
    CrystalHub.DropShadow.BackgroundTransparency = 1.000
    CrystalHub.DropShadow.BorderSizePixel = 0
    CrystalHub.DropShadow.Position = UDim2.new(0.5, 0, 0.5, 0)
    CrystalHub.DropShadow.Size = UDim2.new(1, 47, 1, 47)
    CrystalHub.DropShadow.ZIndex = 0
    CrystalHub.DropShadow.Image = "rbxassetid://6015897843"
    CrystalHub.DropShadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.DropShadow.ImageTransparency = 0.300
    CrystalHub.DropShadow.ScaleType = Enum.ScaleType.Slice
    CrystalHub.DropShadow.SliceCenter = Rect.new(49, 49, 450, 450)

    CrystalHub.TopBar.Name = "Top"
    CrystalHub.TopBar.Parent = CrystalHub.MainFrame
    CrystalHub.TopBar.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.TopBar.BackgroundTransparency = 0.999
    CrystalHub.TopBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.TopBar.BorderSizePixel = 0
    CrystalHub.TopBar.Size = UDim2.new(1, 0, 0, 40)
    CrystalHub.TopBar.ZIndex = 2

    CrystalHub.TopTitle.Name = "TopTitle"
    CrystalHub.TopTitle.Parent = CrystalHub.TopBar
    CrystalHub.TopTitle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.TopTitle.BackgroundTransparency = 0.999
    CrystalHub.TopTitle.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.TopTitle.BorderSizePixel = 0
    CrystalHub.TopTitle.Position = UDim2.new(0, 15, 0, 12)
    CrystalHub.TopTitle.Size = UDim2.new(0, 100, 0, 16)
    CrystalHub.TopTitle.Font = Enum.Font.Arcade
    CrystalHub.TopTitle.Text = WindowConfig.Title
    CrystalHub.TopTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.TopTitle.TextSize = 14.000
    CrystalHub.TopTitle.TextXAlignment = Enum.TextXAlignment.Left

    CrystalHub.TopDescription.Name = "TopDescription"
    CrystalHub.TopDescription.Parent = CrystalHub.TopBar
    CrystalHub.TopDescription.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.TopDescription.BackgroundTransparency = 0.999
    CrystalHub.TopDescription.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.TopDescription.BorderSizePixel = 0
    CrystalHub.TopDescription.Position = UDim2.new(0, 0, 0, 12)
    CrystalHub.TopDescription.Size = UDim2.new(0, 80, 0, 16)
    CrystalHub.TopDescription.Font = Enum.Font.GothamBold
    CrystalHub.TopDescription.Text = WindowConfig.Description
    CrystalHub.TopDescription.TextColor3 = Color3.fromRGB(200, 170, 255)
    CrystalHub.TopDescription.TextSize = 12.000
    CrystalHub.TopDescription.TextTransparency = 0.300
    CrystalHub.TopDescription.TextXAlignment = Enum.TextXAlignment.Left
    
    CrystalHub.CloseButton.Name = "CloseButton"
    CrystalHub.CloseButton.Parent = CrystalHub.TopBar
    CrystalHub.CloseButton.AnchorPoint = Vector2.new(1, 0)
    CrystalHub.CloseButton.BackgroundTransparency = 1.000
    CrystalHub.CloseButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.CloseButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.CloseButton.BorderSizePixel = 0
    CrystalHub.CloseButton.Position = UDim2.new(1, 0, 0, 0)
    CrystalHub.CloseButton.Size = UDim2.new(0, 40, 0, 40)
    CrystalHub.CloseButton.Font = Enum.Font.GothamBold
    CrystalHub.CloseButton.AutoButtonColor = false
    CrystalHub.CloseButton.Text = ""
    CrystalHub.CloseButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.CloseButton.TextSize = 14.000

    Crystal.Mouseto(CrystalHub.CloseButton, function()
        Crystal.TweenObject({CrystalHub.CloseButton, 0.2, "BackgroundTransparency", 0.970})
        Crystal.TweenObject({CrystalHub.CloseBorderLeft, 0.2, "BackgroundTransparency", 0.000})
        Crystal.TweenObject({CrystalHub.CloseBorderBottom, 0.2, "BackgroundTransparency", 0.000})
    end, function()
        Crystal.TweenObject({CrystalHub.CloseButton, 0.2, "BackgroundTransparency", 1.000})
        Crystal.TweenObject({CrystalHub.CloseBorderLeft, 0.2, "BackgroundTransparency", 1.000})
        Crystal.TweenObject({CrystalHub.CloseBorderBottom, 0.2, "BackgroundTransparency", 1.000})
    end)

    Crystal.Click(CrystalHub.CloseButton, function()
        CrystalHub.MainFrame.Visible = false
    end)

    CrystalHub.CloseCorner.CornerRadius = UDim.new(0, 12)
    CrystalHub.CloseCorner.Parent = CrystalHub.CloseButton

    CrystalHub.CloseImage.Name = "CloseImage"
    CrystalHub.CloseImage.Parent = CrystalHub.CloseButton
    CrystalHub.CloseImage.AnchorPoint = Vector2.new(0.5, 0.5)
    CrystalHub.CloseImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.CloseImage.BackgroundTransparency = 0.999
    CrystalHub.CloseImage.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.CloseImage.BorderSizePixel = 0
    CrystalHub.CloseImage.Position = UDim2.new(0.5, 0, 0.5, 0)
    CrystalHub.CloseImage.Size = UDim2.new(1, -22, 1, -22)
    CrystalHub.CloseImage.Image = "rbxassetid://18556800637"
    CrystalHub.CloseImage.ImageColor3 = Color3.fromRGB(230, 230, 230)

    CrystalHub.CloseBorderLeft.Name = "FrameBiNgu"
    CrystalHub.CloseBorderLeft.Parent = CrystalHub.CloseButton
    CrystalHub.CloseBorderLeft.BackgroundColor3 = Color3.fromRGB(100, 220, 255)
    CrystalHub.CloseBorderLeft.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.CloseBorderLeft.BorderSizePixel = 0
    CrystalHub.CloseBorderLeft.Size = UDim2.new(0, 7, 1, 0)
    CrystalHub.CloseBorderLeft.BackgroundTransparency = 1.000

    CrystalHub.CloseBorderBottom.Name = "FrameOc"
    CrystalHub.CloseBorderBottom.Parent = CrystalHub.CloseButton
    CrystalHub.CloseBorderBottom.BackgroundColor3 = Color3.fromRGB(100, 220, 255)
    CrystalHub.CloseBorderBottom.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.CloseBorderBottom.BorderSizePixel = 0
    CrystalHub.CloseBorderBottom.BackgroundTransparency = 1.000
    CrystalHub.CloseBorderBottom.Position = UDim2.new(0, 0, 1, -5)
    CrystalHub.CloseBorderBottom.Size = UDim2.new(1, 0, 0, 5)

    CrystalHub.MaxButton.Name = "MaxButton"
    CrystalHub.MaxButton.Parent = CrystalHub.TopBar
    CrystalHub.MaxButton.AutoButtonColor = false
    CrystalHub.MaxButton.AnchorPoint = Vector2.new(1, 0)
    CrystalHub.MaxButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.MaxButton.BackgroundTransparency = 0.999
    CrystalHub.MaxButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.MaxButton.BorderSizePixel = 0
    CrystalHub.MaxButton.Position = UDim2.new(1, -39, 0, 0)
    CrystalHub.MaxButton.Size = UDim2.new(0, 40, 0, 40)
    CrystalHub.MaxButton.Font = Enum.Font.GothamBold
    CrystalHub.MaxButton.Text = ""
    CrystalHub.MaxButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.MaxButton.TextSize = 14.000

    local OldPos, OldSize
    Crystal.Click(CrystalHub.MaxButton, function()
        if CrystalHub.MainFrame.Size.Y.Scale < 1 then
            OldPos = CrystalHub.MainFrame.Position
            OldSize = CrystalHub.MainFrame.Size
            Crystal.TweenObject({CrystalHub.MainFrame, 0.5, "Size", UDim2.new(1, 0, 1, 0)})
            Crystal.TweenObject({CrystalHub.MainFrame, 0.5, "Position", UDim2.new(0, 0, 0, 0)})
        else
            Crystal.TweenObject({CrystalHub.MainFrame, 0.5, "Size", OldSize})
            Crystal.TweenObject({CrystalHub.MainFrame, 0.5, "Position", OldPos})
        end
    end)

    Crystal.Mouseto(CrystalHub.MaxButton, function()
        CrystalHub.MaxButton.BackgroundTransparency = 0.970
        Crystal.TweenObject({CrystalHub.MaxImage, 0.2, "ImageColor3", Color3.fromRGB(255, 255, 255)})
    end, function()
        CrystalHub.MaxButton.BackgroundTransparency = 0.999
        Crystal.TweenObject({CrystalHub.MaxImage, 0.2, "ImageColor3", Color3.fromRGB(230, 230, 230)})
    end)

    CrystalHub.MaxImage.Name = "MaxImage"
    CrystalHub.MaxImage.Parent = CrystalHub.MaxButton
    CrystalHub.MaxImage.AnchorPoint = Vector2.new(0.5, 0.5)
    CrystalHub.MaxImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.MaxImage.BackgroundTransparency = 0.999
    CrystalHub.MaxImage.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.MaxImage.BorderSizePixel = 0
    CrystalHub.MaxImage.Position = UDim2.new(0.5, 0, 0.5, 0)
    CrystalHub.MaxImage.Size = UDim2.new(1, -24, 1, -24)
    CrystalHub.MaxImage.Image = "rbxassetid://9886659406"
    CrystalHub.MaxImage.ImageColor3 = Color3.fromRGB(230, 230, 230)

    CrystalHub.HideButton.Name = "HideButton"
    CrystalHub.HideButton.Parent = CrystalHub.TopBar
    CrystalHub.HideButton.AutoButtonColor = false
    CrystalHub.HideButton.AnchorPoint = Vector2.new(1, 0)
    CrystalHub.HideButton.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    CrystalHub.HideButton.BackgroundTransparency = 0.999
    CrystalHub.HideButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.HideButton.BorderSizePixel = 0
    CrystalHub.HideButton.Position = UDim2.new(1, -77, 0, 0)
    CrystalHub.HideButton.Size = UDim2.new(0, 40, 0, 40)
    CrystalHub.HideButton.Font = Enum.Font.GothamBold
    CrystalHub.HideButton.Text = ""
    CrystalHub.HideButton.TextColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.HideButton.TextSize = 14.000

    Crystal.Mouseto(CrystalHub.HideButton, function()
        CrystalHub.HideButton.BackgroundTransparency = 0.950
        Crystal.TweenObject({CrystalHub.HideImage, 0.2, "ImageColor3", Color3.fromRGB(255, 255, 255)})
    end, function()
        CrystalHub.HideButton.BackgroundTransparency = 0.999
        Crystal.TweenObject({CrystalHub.HideImage, 0.2, "ImageColor3", Color3.fromRGB(230, 230, 230)})
    end)

    Crystal.Click(CrystalHub.HideButton, function()
        CrystalHub.MainFrame.Visible = false
    end)

    CrystalHub.HideImage.Name = "HideImage"
    CrystalHub.HideImage.Parent = CrystalHub.HideButton
    CrystalHub.HideImage.AnchorPoint = Vector2.new(0.5, 0.5)
    CrystalHub.HideImage.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.HideImage.BackgroundTransparency = 0.999
    CrystalHub.HideImage.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.HideImage.BorderSizePixel = 0
    CrystalHub.HideImage.Position = UDim2.new(0.5, 0, 0.5, 0)
    CrystalHub.HideImage.Size = UDim2.new(1, -24, 1, -24)
    CrystalHub.HideImage.Image = "rbxassetid://18556824827"
    CrystalHub.HideImage.ImageColor3 = Color3.fromRGB(230, 230, 230)

    CrystalHub.DecideFrame.Name = "DecideFrame"
    CrystalHub.DecideFrame.Parent = CrystalHub.TopBar
    CrystalHub.DecideFrame.AnchorPoint = Vector2.new(0.5, 1)
    CrystalHub.DecideFrame.BackgroundColor3 = Color3.fromRGB(200, 170, 255)
    CrystalHub.DecideFrame.BackgroundTransparency = 0.800
    CrystalHub.DecideFrame.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.DecideFrame.BorderSizePixel = 0
    CrystalHub.DecideFrame.Position = UDim2.new(0.5, 0, 1, 2)
    CrystalHub.DecideFrame.Size = UDim2.new(1, -14, 0, 2)
    
    CrystalHub.DecideCorner.CornerRadius = UDim.new(0, 100)
    CrystalHub.DecideCorner.Parent = CrystalHub.DecideFrame

    CrystalHub.TabBar.Name = "TabBar"
    CrystalHub.TabBar.Parent = CrystalHub.MainFrame
    CrystalHub.TabBar.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    CrystalHub.TabBar.BackgroundTransparency = 0.950
    CrystalHub.TabBar.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.TabBar.BorderSizePixel = 0
    CrystalHub.TabBar.Position = UDim2.new(0, 0, 0, 40)
    CrystalHub.TabBar.Size = UDim2.new(1, 0, 0, 35)
    CrystalHub.TabBar.ZIndex = 1

    CrystalHub.TabBarCorner.CornerRadius = UDim.new(0, 6)
    CrystalHub.TabBarCorner.Parent = CrystalHub.TabBar

    CrystalHub.TabBarStroke.Parent = CrystalHub.TabBar
    CrystalHub.TabBarStroke.Color = Color3.fromRGB(80, 60, 120)
    CrystalHub.TabBarStroke.Thickness = 1

    CrystalHub.TabListLayout.Parent = CrystalHub.TabBar
    CrystalHub.TabListLayout.FillDirection = Enum.FillDirection.Horizontal
    CrystalHub.TabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    CrystalHub.TabListLayout.Padding = UDim.new(0, 5)
    CrystalHub.TabListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

    CrystalHub.StatusSection.Name = "StatusSection"
    CrystalHub.StatusSection.Parent = CrystalHub.MainFrame
    CrystalHub.StatusSection.BackgroundColor3 = Color3.fromRGB(15, 20, 35)
    CrystalHub.StatusSection.BackgroundTransparency = 0
    CrystalHub.StatusSection.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.StatusSection.BorderSizePixel = 0
    CrystalHub.StatusSection.Position = UDim2.new(0, 10, 0, 75)
    CrystalHub.StatusSection.Size = UDim2.new(0, 140, 1, -85)
    CrystalHub.StatusSection.ZIndex = 2

    CrystalHub.StatusCorner.CornerRadius = UDim.new(0, 6)
    CrystalHub.StatusCorner.Parent = CrystalHub.StatusSection

    CrystalHub.StatusStroke.Parent = CrystalHub.StatusSection
    CrystalHub.StatusStroke.Color = Color3.fromRGB(80, 60, 120)
    CrystalHub.StatusStroke.Thickness = 1

    CrystalHub.Layers.Name = "Layers"
    CrystalHub.Layers.Parent = CrystalHub.MainFrame
    CrystalHub.Layers.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    CrystalHub.Layers.BackgroundTransparency = 0.999
    CrystalHub.Layers.BorderColor3 = Color3.fromRGB(0, 0, 0)
    CrystalHub.Layers.BorderSizePixel = 0
    CrystalHub.Layers.Position = UDim2.new(0, 160, 0, 75)
    CrystalHub.Layers.Size = UDim2.new(1, -170, 1, -85)
    CrystalHub.Layers.ZIndex = 3

    CrystalHub.LayersFolder.Name = "LayersFolder"
    CrystalHub.LayersFolder.Parent = CrystalHub.Layers

    local LayersPageLayout = Instance.new("UIPageLayout")
    LayersPageLayout.Name = "LayersPageLayout"
    LayersPageLayout.Parent = CrystalHub.LayersFolder
    LayersPageLayout.SortOrder = Enum.SortOrder.LayoutOrder
    LayersPageLayout.EasingDirection = Enum.EasingDirection.InOut
    LayersPageLayout.EasingStyle = Enum.EasingStyle.Quad
    LayersPageLayout.GamepadInputEnabled = false
    LayersPageLayout.ScrollWheelInputEnabled = false
    LayersPageLayout.TouchInputEnabled = false
    LayersPageLayout.TweenTime = 0.350

    CrystalHub.TopDescription.Position = UDim2.new(0, CrystalHub.TopTitle.TextBounds.X + 19, 0, 12)

    Crystal.MakeDraggable(CrystalHub.MainFrame, CrystalHub.TopBar)

    Crystal.CustomSize(CrystalHub.MainFrame)

    Crystal.UserInputService.InputBegan:Connect(function(input)
        if input.KeyCode == WindowConfig.KeyCode then
            CrystalHub.MainFrame.Visible = not CrystalHub.MainFrame.Visible
        end
    end)

    local TabSystem = {}
    local TabCount = 0

    local function SParagraph(config)
        config = config or {}
        config.Title = config.Title or "Untitled"
        config.Content = config.Content or ""
        config.IconLabel = config.IconLabel or ""
        config.SizeIcon = config.SizeIcon or 16

        local ParagraphFrame = Instance.new("Frame")
        local ParagraphCorner = Instance.new("UICorner")
        local ParagraphTitle = Instance.new("TextLabel")
        local ParagraphContent = Instance.new("TextLabel")
        local ParagraphIcon = Instance.new("ImageLabel")
        local ParagraphLayout = Instance.new("UIListLayout")
        local ParagraphPadding = Instance.new("UIPadding")

        ParagraphFrame.Name = "Paragraph"
        ParagraphFrame.Parent = CrystalHub.StatusSection
        ParagraphFrame.BackgroundColor3 = Color3.fromRGB(20, 25, 40)
        ParagraphFrame.BackgroundTransparency = 0.1
        ParagraphFrame.BorderSizePixel = 0
        ParagraphFrame.Size = UDim2.new(1, -10, UDim.new(0, 0), 0)
        ParagraphFrame.LayoutOrder = #CrystalHub.StatusSection:GetChildren()

        ParagraphCorner.CornerRadius = UDim.new(0, 6)
        ParagraphCorner.Parent = ParagraphFrame

        ParagraphLayout.Parent = ParagraphFrame
        ParagraphLayout.SortOrder = Enum.SortOrder.LayoutOrder
        ParagraphLayout.Padding = UDim.new(0, 5)

        ParagraphPadding.Parent = ParagraphFrame
        ParagraphPadding.PaddingLeft = UDim.new(0, 10)
        ParagraphPadding.PaddingTop = UDim.new(0, 10)
        ParagraphPadding.PaddingRight = UDim.new(0, 10)
        ParagraphPadding.PaddingBottom = UDim.new(0, 10)

        ParagraphIcon.Name = "Icon"
        ParagraphIcon.Parent = ParagraphFrame
        ParagraphIcon.BackgroundTransparency = 1
        ParagraphIcon.Size = UDim2.new(0, config.SizeIcon, 0, config.SizeIcon)
        ParagraphIcon.Image = config.IconLabel
        ParagraphIcon.ImageColor3 = Color3.fromRGB(200, 170, 255)
        ParagraphIcon.ImageTransparency = 0.3

        ParagraphTitle.Name = "Title"
        ParagraphTitle.Parent = ParagraphFrame
        ParagraphTitle.BackgroundTransparency = 1
        ParagraphTitle.Size = UDim2.new(1, 0, 0, 16)
        ParagraphTitle.Font = Enum.Font.GothamBold
        ParagraphTitle.Text = config.Title
        ParagraphTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
        ParagraphTitle.TextSize = 12
        ParagraphTitle.TextXAlignment = Enum.TextXAlignment.Left

        ParagraphContent.Name = "Content"
        ParagraphContent.Parent = ParagraphFrame
        ParagraphContent.BackgroundTransparency = 1
        ParagraphContent.Size = UDim2.new(1, 0, 0, 0)
        ParagraphContent.Font = Enum.Font.Gotham
        ParagraphContent.Text = config.Content
        ParagraphContent.TextColor3 = Color3.fromRGB(180, 180, 180)
        ParagraphContent.TextSize = 10
        ParagraphContent.TextWrapped = true
        ParagraphContent.TextXAlignment = Enum.TextXAlignment.Left

        local function UpdateSize()
            local titleBounds = ParagraphTitle.TextBounds
            local contentBounds = ParagraphContent.TextBounds
            ParagraphFrame.Size = UDim2.new(1, -20, 0, titleBounds.Y + contentBounds.Y + 30)
        end
        UpdateSize()
        ParagraphTitle:GetPropertyChangedSignal("TextBounds"):Connect(UpdateSize)
        ParagraphContent:GetPropertyChangedSignal("TextBounds"):Connect(UpdateSize)

        return ParagraphFrame
    end

    function TabSystem:AddTab(TabConfig)
        TabConfig = TabConfig or {}
        TabConfig.Title = TabConfig.Title or "Tab"
        TabConfig.Icon = TabConfig.Icon or ""

        local Tab = Instance.new("Frame")
        local TabCorner = Instance.new("UICorner")
        local TabImage = Instance.new("ImageLabel")
        local TabButton = Instance.new("TextButton")
        local TabName = Instance.new("TextLabel")
        local ScrollLayers = Instance.new("ScrollingFrame")
        local ScrollLayersLayout = Instance.new("UIListLayout")

        Tab.Name = "Tab"
        Tab.Parent = CrystalHub.TabBar
        Tab.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        Tab.BackgroundTransparency = 0.999
        Tab.BorderSizePixel = 0
        Tab.Size = UDim2.new(0, 100, 1, 0)

        TabCorner.CornerRadius = UDim.new(0, 6)
        TabCorner.Parent = Tab

        TabImage.Name = "TabImage"
        TabImage.Parent = Tab
        TabImage.AnchorPoint = Vector2.new(0, 0.5)
        TabImage.BackgroundTransparency = 0.999
        TabImage.BorderSizePixel = 0
        TabImage.Position = UDim2.new(0, 5, 0.5, 0)
        TabImage.Size = UDim2.new(0, 16, 0, 16)
        TabImage.Image = TabConfig.Icon
        TabImage.ImageTransparency = 0.600
        TabImage.ImageColor3 = Color3.fromRGB(230, 230, 230)

        TabButton.Name = "TabButton"
        TabButton.Parent = Tab
        TabButton.BackgroundTransparency = 0.999
        TabButton.BorderSizePixel = 0
        TabButton.Size = UDim2.new(1, 0, 1, 0)
        TabButton.Text = ""
        TabButton.Font = Enum.Font.GothamBold

        TabName.Name = "TabName"
        TabName.Parent = Tab
        TabName.AnchorPoint = Vector2.new(0, 0.5)
        TabName.BackgroundTransparency = 0.999
        TabName.BorderSizePixel = 0
        TabName.Position = UDim2.new(0, 25, 0.5, 0)
        TabName.Size = UDim2.new(1, -30, 0, 12)
        TabName.Font = Enum.Font.GothamBold
        TabName.Text = TabConfig.Title
        TabName.TextColor3 = Color3.fromRGB(230, 230, 230)
        TabName.TextSize = 11
        TabName.TextTransparency = 0.600
        TabName.TextXAlignment = Enum.TextXAlignment.Left

        ScrollLayers.Name = "ScrollLayers"
        ScrollLayers.Parent = CrystalHub.LayersFolder
        ScrollLayers.Active = true
        ScrollLayers.BackgroundTransparency = 0.999
        ScrollLayers.BorderSizePixel = 0
        ScrollLayers.Size = UDim2.new(1, 0, 1, 0)
        ScrollLayers.ScrollBarImageColor3 = Color3.fromRGB(200, 170, 255)
        ScrollLayers.CanvasSize = UDim2.new(0, 0, 0, 0)
        ScrollLayers.ScrollBarImageTransparency = 0.700
        ScrollLayers.ScrollBarThickness = 3
        ScrollLayers.LayoutOrder = TabCount

        Crystal.Stepped:Connect(function()
            ScrollLayers.CanvasSize = UDim2.new(0, 0, 0, ScrollLayersLayout.AbsoluteContentSize.Y + 15)
        end)

        ScrollLayersLayout.Parent = ScrollLayers
        ScrollLayersLayout.SortOrder = Enum.SortOrder.LayoutOrder
        ScrollLayersLayout.Padding = UDim.new(0, 5)

        if TabCount == 0 then
            local ChoosingFrame = Instance.new("Frame")
            local ChoosingCorner = Instance.new("UICorner")
            local ChoosingStroke = Instance.new("UIStroke")

            ChoosingFrame.Name = "ChoosingFrame"
            ChoosingFrame.Parent = Tab
            ChoosingFrame.BackgroundColor3 = Color3.fromRGB(200, 170, 255)
            ChoosingFrame.BorderSizePixel = 0
            ChoosingFrame.Position = UDim2.new(0, 0, 1, 0)
            ChoosingFrame.Size = UDim2.new(1, 0, 0, 3)

            ChoosingCorner.CornerRadius = UDim.new(0, 0)
            ChoosingCorner.Parent = ChoosingFrame

            ChoosingStroke.Parent = ChoosingFrame
            ChoosingStroke.Color = Color3.fromRGB(200, 170, 255)
            ChoosingStroke.Thickness = 0.800

            LayersPageLayout:JumpToIndex(0)
            TabImage.ImageTransparency = 0
            Tab.BackgroundTransparency = 0.950
            TabName.TextTransparency = 0
        end

        if LayersPageLayout.CurrentPage ~= ScrollLayers then
            Crystal.Mouseto(Tab, function()
                Tab.BackgroundTransparency = 0.940
            end, function()
                Tab.BackgroundTransparency = 0.999
            end)
        end

        TabButton.Activated:Connect(function()
            local RealChooseFrame
            for _, v in next, Tab.Parent:GetChildren() do
                for r, frame in next, v:GetChildren() do
                    if frame.Name == "ChoosingFrame" then
                        RealChooseFrame = frame
                        break
                    end
                end
            end

            if RealChooseFrame ~= nil and LayersPageLayout.CurrentPage ~= ScrollLayers then
                for r, v in next, Tab.Parent:GetChildren() do
                    if v.ClassName ~= "UIListLayout" and v.ClassName ~= "UICorner" and v.ClassName ~= "UIStroke" then
                        Crystal.TweenObject({v, 0.4, "BackgroundTransparency", 0.999})
                        Crystal.TweenObject({v.TabImage, 0.4, "ImageTransparency", 0.600})
                        Crystal.TweenObject({v.TabName, 0.4, "TextTransparency", 0.600})
                    end
                end
                
                Crystal.TweenObject({Tab, 0.4, "BackgroundTransparency", 0.950})
                Crystal.TweenObject({TabImage, 0.4, "ImageTransparency", 0})
                Crystal.TweenObject({TabName, 0.4, "TextTransparency", 0})
                LayersPageLayout:JumpToIndex(TabCount)
            end
        end)     

        TabCount = TabCount + 1
        return ScrollLayers
    end

    return CrystalHub, TabSystem, SParagraph
end

return Crystal